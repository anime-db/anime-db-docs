# Сборка на OS Linux из исходников

Описание установки приложения **Anime DB** на Linux-подобных OS на примере Ubuntu 12.04 LTS.
Процесс установки приложения в других OS семейства Linux будет мало отличатся от описанных шагов.

<a name="stap-1"></a>
## Шаг 1: Установка PHP

Приложение написано на языке программирования PHP и для работы ему необходим PHP интерпретатор. В случае OS Windows
есть скомпилированная версия не требующая установки в системе и потому приложение на Windows легко устанавливается. На
других OS таких как Ubuntu необходимо устанавливать интерпретатор в системе.

Для упрощения работы PHP будет установлен из пакетов. В репозиториях Ubuntu сейчас находится PHP версии 5.3, а для
работы приложения требуется 5.4 и выше, в связи с чем, добавляем новый репозиторий со свежей версией:

    sudo add-apt-repository ppa:ondrej/php5

Обновить информацию о доступных пакетах и обновить их:

    sudo apt-get update && sudo apt-get upgrade

Установить PHP 5.5 и основные расширения:

    sudo apt-get install php5-cli php5-curl php5-gd php5-sqlite php5-tidy

<a name="stap-2"></a>
## Шаг 2: Установка приложения

Клонируйте **Git** репозиторий с последней версией приложения:

    git clone git://github.com/anime-db/anime-db.git && cd anime-db

> Если у Вас не установлен **Git** Вы можете устанавить его выполнив команду:
> ```
> sudo apt-get install git
> ```
> Или Вы можете скачать исходники в виде архива:
> ```
> wget https://github.com/anime-db/anime-db/archive/master.zip
> unzip master.zip && mv anime-db-master anime-db && cd anime-db
> ```

Скачайте менеджер зависимостей **Composer**:

    curl -s https://getcomposer.org/installer | php

> Если у Вас не установлен **cURL** Вы можете установить его использовав команду:
> ```
> sudo apt-get install curl
> ```
> Или Вы можете использовать **PHP** для скачивания **Composer**:
> ```
> php -r "readfile('https://getcomposer.org/installer');" | php
> ```

Установите зависимости используя Composer:

    php composer.phar install --prefer-dist --no-dev

<a name="stap-3"></a>
## Шаг 3: Запуск приложения

Для того что бы запустить приложение Вам необходимо в терминале перейти в директорию в которую вы
установили приложение. В корне директории находится скрипт `AnimeDB` отвечающий за управление приложением.
Для запуска приложения выполните команду:

    ./AnimeDB start

После того как Вы запустите приложение Вы можете открыть свой браузер и перейти по адресу <http://localhost:56780/>. По этому адресу
приложение доступно для пользования.

> Если Ваш компьютер доступен в локальной сети, то Вы можете подключится к приложению с любого компьютера в сети
используя IP адрес вашего компьютера в локальной сети и порта 56780. Пример: <http://192.168.0.1:56780/>. Так же Вы можете
изменить порт подключения отредактировав параметр `port` в файле `AnimeDB`. Пример установки порта 80:
> ```
> port=80
> ```

После того как вы закончили работу с приложением вы можете остановить его выполнив скрипт:

    ./AnimeDB stop

После обновления приложения вам может понадобится перезапустить приложение. Сделать это можно выполнив команду:

    ./AnimeDB restart

> Вы можете установить приложение как сервис что бы упростить работу с ним или запускать вместе с системой. Для этого
Вам необходимо отредактировать параметр `path` в файле `AnimeDB` и указать в нем абсолютный путь к приложению.
> ```
> path=/path/to/anime-db
> ```
> Далее Вам необходимо создать ссылку на скрипт в сервисах:
> ```
> sudo ln -s /path/to/anime-db/AnimeDB /etc/init.d/AnimeDB
> ```
> Теперь вы можете запускать и останавливать приложение используя стандартный интерфейс сервисов:
> ```
> service AnimeDB start
> ```
> Для того что бы приложение запускалось при запуске системы необходимо выполнить команду:
> ```
> sudo update-rc.d AnimeDB defaults
> ```